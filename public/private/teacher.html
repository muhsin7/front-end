<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
    <title>Home</title>

    <!-- /////////////////////////////////////////////////////// -->
    <link rel="stylesheet" href="../css/icons.css">
    <link rel="stylesheet" href="../css/materialize.css">
    <link rel="stylesheet" href="../css/materialize.css">
    <link rel="stylesheet" href="../css/nord-colours.css">
    <link rel="stylesheet" href="../css/styles.css">
    <!-- /////////////////////////////////////////////////////// -->
</head>

  <body>
    <div class="fixed-action-btn" id="writePostButton">
      <a class="btn-floating btn-large nord-red modal-trigger" href="#post">
        <i class="large material-icons">mode_edit</i>
      </a>
   </div>
   <div class="modal modal-fixed-footer form" id="post" action="/api/post/create" method="POST" on-success-reload="true">
     <div class="modal-content">
        <div>
          <label>Class</label>
          <div class="row">
            <!-- <div class="input-field col s6">
              <input type="text" id="autocomplete-input" class="autocomplete" placeholder="Enter class name">
            </div> -->
            <div class="input-field col s12" ignore-value-container>
              <select id="classSelect" read-value-container read-value name="classID" required>
                <option value="" disabled selected class="disabled">Select a class to post in</option>
              </select>
            </div>
          </div>
          <label>Content</label>
          <div class="row">
            <div class="input-field col s12">
              <!-- <i class="material-icons prefix">mode_edit</i> -->
              <textarea id="icon_prefix2" class="materialize-textarea" min-length="5" required placeholder="Enter Content" name="content"></textarea>
              <!-- <label for="icon_prefix2">Enter Post</label> -->
            </div>
          </div>

        <div class="row">

          <!-- <div class="file-field input-field">

            <a class="red-button btn">
              <i class="material-icons">attach_file</i>
              <span>Attach file</span>
              <input type="file" multiple>
            </a>
            <div class="file-path-wrapper">
              <input class="file-path validate" type="text" placeholder="Upload one or more files">
            </div>
          </div> -->
        </div>
        </div>

     </div>
     <div class="modal-footer">
       <center>
         <button class="btn-flat postbutton" type='submit'><div class="post2">Post</div></button>
       </center>
     </div>
   </div>


   <nav class="nord-darkblue" role="navigation">
     <ul id="profileDropdown" class="dropdown-content">
       <li><a href="/profile/" class="modal-trigger">Profile</a></li>
       <li><a href="/auth/logout" class="modal-trigger">Log out</a></li>
     </ul>
     <div class="nav-wrapper container">
       <a id="logo-container" href="/home/" class="brand-logo"><img src="../images/cisco.png" height="50px" width="auto" style="padding-top:5px;" /></a>
       <ul class="right hide-on-med-and-down">
         <li  class="active"><a href="/home/">Home</a></li>
         <li><a href="/assignments/">Assignments</a></li>
         <li><a class="dropdown-trigger" href="#!" data-target="profileDropdown"><i class="material-icons">person arrow_drop_down</i></a></li>
       </ul>

       <ul id="nav-mobile" class="sidenav">
         <li  class="active"><a href="/home/">Home</a></li>
         <li><a href="/assignments/">Assignments</a></li>
         <li><a href="/profile/" class="modal-trigger">Profile</a></li>
         <li><a href="/auth/logout" class="modal-trigger">Log out</a></li>
       </ul>
       <a href="#" data-target="nav-mobile" class="sidenav-trigger"><i class="material-icons">menu</i></a>
     </div>
   </nav>






    <div class="container col s12">

      <div class="row">
        <!-- <div class="user"></div> -->
        <div class="classes col s2">
          <br style="font-size: 50%"/>
          <b>Classes</b>
          <hr/>
          <div class="truncate">
            <ul class="class_text" id="class-list">
              <session-error>
                <a href="/class/"><li class="truncate">Chemistry HL<a href="#" class="dropdown-trigger" data-target="classDropdown"><i class="material-icons class_menu">more_horiz</i></a></li></a>
                <a href="/class/"><li class="truncate">Physics HL<a href="#" class="dropdown-trigger" data-target="classDropdown"><i class="material-icons class_menu">more_horiz</i></a></li></a>
                <a href="/class/"><li class="truncate">Mathematics AA HL<a href="#" class="dropdown-trigger" data-target="classDropdown"><i class="material-icons class_menu">more_horiz</i></a></li></a>
                <a href="/class/"><li class="truncate">Spanish Ab HL<a href="#" class="dropdown-trigger" data-target="classDropdown"><i class="material-icons class_menu">more_horiz</i></a></li></a>
                <a href="/class/"><li class="truncate">Language and Literature SL<a href="#" class="dropdown-trigger" data-target="classDropdown"><i class="material-icons class_menu">more_horiz</i></a></li></a>
                <a href="/class/"><li class="truncate">Economics SL<a href="#" class="dropdown-trigger" data-target="classDropdown"><i class="material-icons class_menu">more_horiz</i></a></li></a>
              </session-error>
            </ul>
          </div>
          <hr />
          <center class="class_buttons">
            <a href="#joinClass" class="joinclass modal-trigger"><i class="material-icons tiny">add</i><b>Join Class</b></a>
            <br   /><br />
            <a href="#createClass" class="joinclass modal-trigger"><i class="material-icons tiny">add</i><b>Create Class</b></a>
          </center>
          <!-- <br /> -->
        </div>

        <ul class="dropdown-content" id="classDropdown" href="#">
          <li class="class_options"><a href="/class/">Open class</a></li>
          <li class="class_options modal-trigger" href="#leaveModal"><a id="leaveClass">Leave class</a></li>
          <li class="warn class_options modal-trigger renameClass" href="#renameModal"><a id="renameClass"><i class="material-icons">edit</i>Rename</a></li>
          <li class="warn class_options modal-trigger deleteClass" href="#deleteModal" id="deleteClass"><a><i class="material-icons">delete</i>Delete class</a></li>
        </ul>


            <div class="modal" id="renameModal">
              <div class="modal-content">
                <center>
                  <h4>Rename ${class}</h4>
                </center>
                <div class="form">
                  <div class="input_field">
                    <input type="text" name="newGroupName" id="newGroupName"/>
                    <label for="newGroupName">Enter new group name</label>
                  </div>
                  <br />
                  <center>
                    <div class="nord-red btn-large modal-close">Cancel</div>
                    <button type="submit" name="button" class="btn-large nord-darkblue">Rename</button>
                  </center>
                </div>
              </div>
            </div>

            <div class="modal" id="deleteModal">
              <div class="modal-content">
                <center>
                  <h4>Are you sure you want to delete ${class}?</h4>
                  <h6><i>All data and posts from the group will be lost forever</i></h6>
                </center>
                <br />
                <center>
                  <div class="nord-red btn-large modal-close">Cancel</div>
                  <div class="btn-large nord-darkblue">Delete</div>
                </center>
              </div>
            </div>

            <div class="modal" id="leaveModal">
              <div class="modal-content">
                <center>
                  <h4>Are you sure you want to leave ${class}?</h4>
                  <h6><i>You will not be able to access the data and posts in this group unless you rejoin the group.</i></h6>
                </center>
                <br />
                <center>
                  <div class="nord-red btn-large modal-close">Cancel</div>
                  <div class="btn-large nord-darkblue">Leave Group</div>
                </center>
              </div>
            </div>

        <div id="joinClass" class="modal">
          <div class="modal-content">
            <div class="form" method="POST" on-success-reload="true" action="/api/class/join" on-error-prompt-selector="#invalidClass" on-error="console.log(response)">
              <h4>Enter Group Code</h4>
              <input type="text" name="classCode" id="groupcode" data-length="5"/>
              <label for="groupcode">Enter 6 character group code (case insensitive)</label><br>
              <span id="invalidClass" style="color:red"></span>
              <div class="modal-footer">
                <button type="submit" name="button" class="btn-flat nord-darkblue-text">Submit</button>
                <a href="#!" class="modal-close waves-effect waves-red btn-flat nord-red" style="color:white">Cancel</a>
              </div>
            </div>
          </div>
        </div>
        <div id="createClass" class="modal">
          <div class="modal-content">
            <div class="form" method="POST" validation-element="<span style='color:red'></span>" on-success-reload="true" action="/api/class/create" on-error-prompt-selector="#invalidClass" on-error="console.log(response)">
              <h4>Enter class name</h4>
              <input type="text" name="className" id="groupcode" min-length="4"/><br>
              <label for="groupcode">Enter name of the class</label><br>
              <span id="invalidClass" style="color:red"></span>
              <div class="modal-footer">
                <button type="submit" name="button" class="btn-flat nord-darkblue-text">Submit</button>
                <a href="#!" class="modal-close waves-effect waves-red btn-flat nord-red" style="color:white">Cancel</a>
              </div>
            </div>
          </div>
        </div>

        <div>
          <ul class="dropdown-content" id="post-dropdown">
            <li class="modal-trigger" href="#editModal"><a>Edit Post</a></li>
            <li class="warn modal-trigger" href="#deletePostModal"><a>Delete Post</a></li>
          </ul>

          <div class="modal" id="editModal">
            <div class="modal-content">
              <div class="form" method="POST" action="/api/post/edit" on-error-prompt-selector=".red" on-success-reload="true" on-error="console.log(response)" id="editForm">
                <h5>Edit post</h5>
                <div class="input-field">
                  <i class="material-icons prefix">mode_edit</i>
                  <input type="text" class='hidden' readonly id="editPostIDVAlue" name="postID" value="">
                  <textarea required class="materialize-textarea" name="content" id="editPostContent"></textarea><br>
                  <span class="red"></span>
                </div>
                <button type="submit" name="button" class="btn-large nord-darkblue">Save</button>
                <div class="btn-large nord-red modal-close" id="editCancel">Cancel</div>
              </div>
            </div>
          </div>

          <!-- <div class="modal" id="deletePostModal">
            <div class="modal-content">
              <center>
                <div class="form" method="POST" action="/api/post/delete" on-success-reload="true" on-error="console.error(response)">
                  <input type="text" name="postID" value="" id="deletePostId">
                  <h5>Are you sure you want to delete this post?</h5>
                  <br />
                  <button class="btn-large nord-red" type="submit">Delete post</button>
                  <div class="btn-large nord-darkblue modal-close">Cancel</div>
                </div>
              </center>
            </div>
          </div> -->
          <div class="modal" id="deletePostModal">
            <div class="modal-content">
              <center>
                <div class="form" method="POST" action="/api/post/delete" on-success-reload="true" on-error="console.error(response)">
                  <input type="text" class='hidden' name="postID" value="" id="deletePostId">
                  <h5>Are you sure you want to delete this post?</h5>
                  <br />
                  <button class="btn-large nord-red" type="submit">Delete post</button>
                  <div class="btn-large nord-darkblue modal-close">Cancel</div>
                </div>
              </center>
            </div>
          </div>

        </div>


        <div class="col offset-s1 s8">
          <h2>Posts</h2>
          <hr />
          <!-- <br /> -->
          <a href="#post" class="modal-trigger"><div class="post-btn btn"><center><b class="valign-wrapper"><i class="material-icons small">mode_edit</i>CREATE A POST</b></center></div></a>
          <br />
          <br />
        </div>
        <div class="container col offset-s1 s8">
          <div class="row" id="postContainer">
            <div class="post hoverable hidden" id="samplePost">
              <div class="post-header">
                <img class="post-pfp" src="../images/default.jpg" />
              </div>
              <div class="poster">Kabir De Sarkar<a href="#" class="dropdown-trigger" data-target="post-dropdown"><i class="material-icons post-options">more_horiz</i></a></div>
              <a class="tooltipped" data-posiion="left" data-tooltip="Teacher"><i class="material-icons nord-yellow-text">school</i></a>
              <a href="#" class="post-class">IBDP1 Chemistry</a>
              <span class="date-text">3:45PM, Wednesday, October 15th, 2019</span>
              <div class="more">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
              <a href="#"><i class="tiny material-icons">attach_file</i> attached_file.png</a>
              <hr />
              <h6><b>Comments</b></h6>
              <div class="form">
                <input name="comment" type="text" class="comment-input"/>
                <button name="comment-btn" type="submit" name="button" class="right-align btn nord-red">Comment</button>
                <br /><br />
              </div>
              <div class="comments">
                <div class="comment">
                  <div class="comment-marker nord-darkblue"></div>
                  <img class="comment-pfp" src="../images/default.jpg"/>
                  <div class="comment-poster">Kabir</div><span class="date-text">3:45PM, Wednesday, October 15th, 2019</span>
                  <div class="comment-text more">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
                </div>
                <div class="comment">
                  <div class="comment-marker nord-darkblue"></div>
                  <img class="comment-pfp" src="../images/default.jpg"/>
                  <div class="comment-poster">Kabir</div><span class="date-text">3:45PM, Wednesday, October 15th, 2019</span>
                  <div class="comment-text more">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
                </div>
                <div class="comment">
                  <div class="comment-marker nord-darkblue"></div>
                  <img class="comment-pfp" src="../images/default.jpg"/>
                  <div class="comment-poster">Kabir</div><span class="date-text">3:45PM, Wednesday, October 15th, 2019</span>
                  <div class="comment-text more">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
                </div>
              </div>
              <div class="load-more-comments">
                <a href="/post/">[Load more comments...]</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- /////////////////////////////////////////////////////// -->
    <script type="text/javascript" src="../js/angular.min.js"></script>
    <script type="text/javascript" src="../js/jquery.js"></script>
    <script type="text/javascript" src="../js/materialize.js"></script>
    <script type="text/javascript" src="../js/materialize.min.js"></script>
    <script type="text/javascript" src="../js/initializing.js"></script>
    <script type="text/javascript" src="../js/script.js"></script>
    <script type="text/javascript" src="../js/events.js"></script>
    <script src="../js/home.js" charset="utf-8"></script>
    <!-- /////////////////////////////////////////////////////// -->
    <script>
    //////DROPDOWN//////
    // $('.dropdown-trigger').dropdown();
    ///////////////////

    $.initSession()
    //////MODALS///////
    $(document).ready(function(){
      $('.modal').modal();
    });
    ///////////////////


        //////SELECT//////
          $(document).ready(function(){
            $('select').formSelect();
          });
        ////////////////////


        /////AUTOCOMPLETE/////

        //////////////////////



      // $('#classDropdown').mouseout(function(){
      //     var isntance = M.Dropdown.getInstance('#classDropdown');
      //     instance.close();
      //   }
      // );

      // $('.class_text a').on('contextmenu', function(){
      //   var instance = M.Dropdown.getInstance('#classDropdown');
      //   instance.open();
      // });

      $('.class_text a').on('contextmenu', function(){
        var instance = M.Dropdown.getInstance($('#classDropdown')[0]); // You have to pass the full element itself, not just the id string
        instance.open();
      })

      $(document).ready(function(){
  $('.tooltipped').tooltip();
});
  </script>
  </body>



</html>
